{"targets":[{"isStage":true,"name":"Stage","variables":{"`jEk@4|i[#Fk?(8x)AV.-my variable":["my variable",0]},"lists":{},"broadcasts":{},"blocks":{},"comments":{},"currentCostume":0,"costumes":[{"name":"backdrop1","dataFormat":"svg","assetId":"cd21514d0531fdffb22204e0ec5ed84a","md5ext":"cd21514d0531fdffb22204e0ec5ed84a.svg","rotationCenterX":240,"rotationCenterY":180}],"sounds":[],"volume":100,"layerOrder":0,"tempo":60,"videoTransparency":50,"videoState":"on","textToSpeechLanguage":null},{"isStage":false,"name":"Sprite1","variables":{},"lists":{},"broadcasts":{},"blocks":{"w":{"opcode":"hermiecontrol_isDeviceOn","next":null,"parent":null,"inputs":{"DEVICE":[1,"x"]},"fields":{},"topLevel":true},"x":{"opcode":"hermiecontrol_menu_devices","next":null,"parent":"w","inputs":{},"fields":{"devices":["heat",null]},"shadow":true},"O":{"opcode":"operator_gt","next":null,"parent":null,"inputs":{"OPERAND1":[1,[10,"80"]],"OPERAND2":[1,[10,"90"]]},"fields":{},"topLevel":true},"P":{"opcode":"operator_lt","next":null,"parent":null,"inputs":{"OPERAND1":[1,[10,"60"]],"OPERAND2":[1,[10,"75"]]},"fields":{},"topLevel":true},"h":{"opcode":"hermiecontrol_setDevice","next":null,"parent":null,"inputs":{"DEVICE":[1,"y"],"STATE":[1,"z"]},"fields":{},"topLevel":true},"y":{"opcode":"hermiecontrol_menu_devices","next":null,"parent":"h","inputs":{},"fields":{"devices":["heat",null]},"shadow":true},"z":{"opcode":"hermiecontrol_menu_states","next":null,"parent":"h","inputs":{},"fields":{"states":["off",null]},"shadow":true},"Q":{"opcode":"looks_say","next":null,"parent":null,"inputs":{"MESSAGE":[1,[10,"Turning heat off!"]]},"fields":{},"topLevel":true},"R":{"opcode":"operator_contains","next":null,"parent":null,"inputs":{"STRING1":[1,[10,"apple"]],"STRING2":[1,[10,"b"]]},"fields":{},"topLevel":true},"S":{"opcode":"control_if_else","next":null,"parent":null,"inputs":{},"fields":{},"topLevel":true},"T":{"opcode":"control_wait","next":null,"parent":null,"inputs":{"DURATION":[1,[5,"5"]]},"fields":{},"topLevel":true},"U":{"opcode":"control_if_else","next":null,"parent":null,"inputs":{},"fields":{},"topLevel":true},"V":{"opcode":"operator_and","next":null,"parent":null,"inputs":{},"fields":{},"topLevel":true},"W":{"opcode":"control_forever","next":null,"parent":null,"inputs":{},"fields":{},"topLevel":true},"A":{"opcode":"hermiecontrol_isDeviceOn","next":null,"parent":null,"inputs":{"DEVICE":[1,"B"]},"fields":{},"topLevel":true},"B":{"opcode":"hermiecontrol_menu_devices","next":null,"parent":"A","inputs":{},"fields":{"devices":["heat",null]},"shadow":true},"C":{"opcode":"operator_and","next":null,"parent":null,"inputs":{"OPERAND2":[2,"i"]},"fields":{},"topLevel":true},"i":{"opcode":"operator_not","next":null,"parent":"C","inputs":{"OPERAND":[2,"j"]},"fields":{}},"j":{"opcode":"hermiecontrol_isDeviceOn","next":null,"parent":"i","inputs":{"DEVICE":[1,"D"]},"fields":{}},"D":{"opcode":"hermiecontrol_menu_devices","next":null,"parent":"j","inputs":{},"fields":{"devices":["heat",null]},"shadow":true},"E":{"opcode":"event_whenflagclicked","next":"k","parent":null,"inputs":{},"fields":{},"topLevel":true},"l":{"opcode":"hermiecontrol_setBaseURL","next":"m","parent":"k","inputs":{"URL":[1,[10,"http://100.101.120.3:5000"]]},"fields":{}},"m":{"opcode":"hermiecontrol_fetchSensor","next":"n","parent":"l","inputs":{},"fields":{}},"n":{"opcode":"looks_sayforsecs","next":"b","parent":"m","inputs":{"MESSAGE":[1,[10,"Temperature is..."]],"SECS":[1,[4,"2"]]},"fields":{}},"b":{"opcode":"looks_say","next":"o","parent":"n","inputs":{"MESSAGE":[3,"p",[10,"Hello!"]]},"fields":{}},"p":{"opcode":"hermiecontrol_getSensorField","next":null,"parent":"b","inputs":{"FIELD":[1,"F"]},"fields":{}},"F":{"opcode":"hermiecontrol_menu_sensorFields","next":null,"parent":"p","inputs":{},"fields":{"sensorFields":["temperature_f",null]},"shadow":true},"o":{"opcode":"control_wait","next":"a","parent":"b","inputs":{"DURATION":[1,[5,"5"]]},"fields":{}},"a":{"opcode":"control_if","next":"c","parent":"o","inputs":{"CONDITION":[2,"q"],"SUBSTACK":[2,"r"]},"fields":{}},"q":{"opcode":"operator_gt","next":null,"parent":"a","inputs":{"OPERAND1":[3,"s",[10,""]],"OPERAND2":[1,[10,"86"]]},"fields":{}},"s":{"opcode":"hermiecontrol_getSensorField","next":null,"parent":"q","inputs":{"FIELD":[1,"G"]},"fields":{}},"G":{"opcode":"hermiecontrol_menu_sensorFields","next":null,"parent":"s","inputs":{},"fields":{"sensorFields":["temperature_f",null]},"shadow":true},"r":{"opcode":"looks_say","next":"d","parent":"a","inputs":{"MESSAGE":[1,[10,"Turning heat off!"]]},"fields":{}},"d":{"opcode":"sound_playuntildone","next":"e","parent":"r","inputs":{"SOUND_MENU":[1,"H"]},"fields":{}},"H":{"opcode":"sound_sounds_menu","next":null,"parent":"d","inputs":{},"fields":{"SOUND_MENU":["A Trumpet",null]},"shadow":true},"e":{"opcode":"hermiecontrol_setDevice","next":null,"parent":"d","inputs":{"DEVICE":[1,"I"],"STATE":[1,"J"]},"fields":{}},"I":{"opcode":"hermiecontrol_menu_devices","next":null,"parent":"e","inputs":{},"fields":{"devices":["heat",null]},"shadow":true},"J":{"opcode":"hermiecontrol_menu_states","next":null,"parent":"e","inputs":{},"fields":{"states":["off",null]},"shadow":true},"c":{"opcode":"control_if","next":null,"parent":"a","inputs":{"CONDITION":[2,"t"],"SUBSTACK":[2,"u"]},"fields":{}},"t":{"opcode":"operator_lt","next":null,"parent":"c","inputs":{"OPERAND1":[3,"v",[10,""]],"OPERAND2":[1,[10,"83"]]},"fields":{}},"v":{"opcode":"hermiecontrol_getSensorField","next":null,"parent":"t","inputs":{"FIELD":[1,"K"]},"fields":{}},"K":{"opcode":"hermiecontrol_menu_sensorFields","next":null,"parent":"v","inputs":{},"fields":{"sensorFields":["temperature_f",null]},"shadow":true},"u":{"opcode":"looks_say","next":"f","parent":"c","inputs":{"MESSAGE":[1,[10,"Turning heat on"]]},"fields":{}},"f":{"opcode":"sound_playuntildone","next":"g","parent":"u","inputs":{"SOUND_MENU":[1,"L"]},"fields":{}},"L":{"opcode":"sound_sounds_menu","next":null,"parent":"f","inputs":{},"fields":{"SOUND_MENU":["A Elec Piano",null]},"shadow":true},"g":{"opcode":"hermiecontrol_setDevice","next":null,"parent":"f","inputs":{"DEVICE":[1,"M"],"STATE":[1,"N"]},"fields":{}},"M":{"opcode":"hermiecontrol_menu_devices","next":null,"parent":"g","inputs":{},"fields":{"devices":["heat",null]},"shadow":true},"N":{"opcode":"hermiecontrol_menu_states","next":null,"parent":"g","inputs":{},"fields":{"states":["on",null]},"shadow":true},"k":{"opcode":"sound_setvolumeto","next":"l","parent":"E","inputs":{"VOLUME":[1,[4,"100"]]},"fields":{}}},"comments":{},"currentCostume":0,"costumes":[{"name":"costume1","bitmapResolution":1,"dataFormat":"svg","assetId":"927d672925e7b99f7813735c484c6922","md5ext":"927d672925e7b99f7813735c484c6922.svg","rotationCenterX":30.74937882782359,"rotationCenterY":58.864768144346826}],"sounds":[{"name":"A Trumpet","assetId":"d2dd6b4372ca17411965dc92d52b2172","dataFormat":"wav","rate":48000,"sampleCount":30282,"md5ext":"d2dd6b4372ca17411965dc92d52b2172.wav"},{"name":"A Elec Piano","assetId":"0cfa8e84d6a5cd63afa31d541625a9ef","dataFormat":"wav","rate":48000,"sampleCount":96000,"md5ext":"0cfa8e84d6a5cd63afa31d541625a9ef.wav"},{"name":"B Trombone","assetId":"85b663229525b73d9f6647f78eb23e0a","dataFormat":"wav","rate":48000,"sampleCount":33789,"md5ext":"85b663229525b73d9f6647f78eb23e0a.wav"}],"volume":100,"layerOrder":1,"visible":true,"x":0,"y":0,"size":100,"direction":90,"draggable":false,"rotationStyle":"all around"}],"monitors":[],"extensions":["hermiecontrol"],"extensionURLs":{"hermiecontrol":"data:application/javascript,%2F%2F%20hermie-control.js%0A(function%20(Scratch)%20%7B%0A%20%20'use%20strict'%3B%0A%0A%20%20class%20HermieControl%20%7B%0A%20%20%20%20constructor()%20%7B%0A%20%20%20%20%20%20this.baseURL%20%3D%20'http%3A%2F%2F100.101.120.3%3A5000'%3B%0A%20%20%20%20%20%20this.deviceResponses%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20this.deviceErrors%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20this.sensorData%20%3D%20%7B%7D%3B%0A%20%20%20%20%20%20this.healthData%20%3D%20%7B%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20%2F%2F%20Helper%3A%20fetch%20with%20timeout%0A%20%20%20%20async%20_fetch(url%2C%20options%20%3D%20%7B%7D)%20%7B%0A%20%20%20%20%20%20const%20controller%20%3D%20new%20AbortController()%3B%0A%20%20%20%20%20%20const%20timeout%20%3D%20setTimeout(()%20%3D%3E%20controller.abort()%2C%205000)%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20res%20%3D%20await%20fetch(url%2C%20%7B%20...options%2C%20signal%3A%20controller.signal%20%7D)%3B%0A%20%20%20%20%20%20%20%20if%20(!res.ok)%20%7B%0A%20%20%20%20%20%20%20%20%20%20const%20data%20%3D%20await%20res.json().catch(()%20%3D%3E%20(%7B%7D))%3B%0A%20%20%20%20%20%20%20%20%20%20throw%20new%20Error(data.error%20%7C%7C%20%60HTTP%20%24%7Bres.status%7D%60)%3B%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20return%20await%20res.json()%3B%0A%20%20%20%20%20%20%7D%20finally%20%7B%0A%20%20%20%20%20%20%20%20clearTimeout(timeout)%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getInfo()%20%7B%0A%20%20%20%20%20%20return%20%7B%0A%20%20%20%20%20%20%20%20id%3A%20'hermiecontrol'%2C%0A%20%20%20%20%20%20%20%20name%3A%20'Hermie%20Control'%2C%0A%20%20%20%20%20%20%20%20color1%3A%20'%23FF6B35'%2C%0A%20%20%20%20%20%20%20%20color2%3A%20'%23E85D31'%2C%0A%20%20%20%20%20%20%20%20blocks%3A%20%5B%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setBaseURL'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20base%20URL%20to%20%5BURL%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20URL%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20defaultValue%3A%20this.baseURL%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'setDevice'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'set%20%5BDEVICE%5D%20%5BSTATE%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DEVICE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'devices'%2C%20defaultValue%3A%20'heat'%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20STATE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'states'%2C%20defaultValue%3A%20'on'%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getDeviceField'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BDEVICE%5D%20response%20%5BFIELD%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20DEVICE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'devices'%2C%20defaultValue%3A%20'heat'%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FIELD%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'deviceFields'%2C%20defaultValue%3A%20'status'%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getDeviceError'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BDEVICE%5D%20last%20error'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20DEVICE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'devices'%2C%20defaultValue%3A%20'heat'%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'isDeviceOn'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BDEVICE%5D%20is%20on%3F'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20DEVICE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'devices'%2C%20defaultValue%3A%20'heat'%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'deviceAsJSON'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'%5BDEVICE%5D%20response%20as%20JSON'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%20DEVICE%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'devices'%2C%20defaultValue%3A%20'heat'%20%7D%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'fetchSensor'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'fetch%20sensor%20data'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getSensorField'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'sensor%20%5BFIELD%5D'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20arguments%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20FIELD%3A%20%7B%20type%3A%20Scratch.ArgumentType.STRING%2C%20menu%3A%20'sensorFields'%2C%20defaultValue%3A%20'temperature_f'%20%7D%0A%20%20%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getSensorError'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'sensor%20error'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'isSensorReadOK'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'sensor%20read%20ok%3F'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'hasAlert'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'sensor%20has%20alert%3F'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'sensorAsJSON'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'sensor%20data%20as%20JSON'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20'---'%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'checkHealth'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.COMMAND%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'check%20system%20health'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'getHealthStatus'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.REPORTER%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'health%20status'%0A%20%20%20%20%20%20%20%20%20%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20opcode%3A%20'isHealthy'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20blockType%3A%20Scratch.BlockType.BOOLEAN%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20text%3A%20'system%20is%20healthy%3F'%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%5D%2C%0A%20%20%20%20%20%20%20%20menus%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20devices%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B'heat'%2C%20'pump'%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20states%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B'on'%2C%20'off'%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20deviceFields%3A%20%7B%20acceptReporters%3A%20true%2C%20items%3A%20%5B'status'%2C%20'timestamp'%5D%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20sensorFields%3A%20%7B%0A%20%20%20%20%20%20%20%20%20%20%20%20acceptReporters%3A%20true%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20items%3A%20%5B'temperature_f'%2C%20'temperature_c'%2C%20'humidity'%2C%20'alert'%2C%20'error'%2C%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'timestamp_iso'%2C%20'heat_on'%2C%20'pump_on'%5D%0A%20%20%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%20%20%7D%0A%20%20%20%20%20%20%7D%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20setBaseURL(args)%20%7B%0A%20%20%20%20%20%20const%20url%20%3D%20args.URL.trim()%3B%0A%20%20%20%20%20%20if%20(url)%20this.baseURL%20%3D%20url.replace(%2F%5C%2F%24%2F%2C%20'')%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20setDevice(args)%20%7B%0A%20%20%20%20%20%20const%20device%20%3D%20args.DEVICE%3B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20json%20%3D%20await%20this._fetch(%60%24%7Bthis.baseURL%7D%2Fcontrol%2F%24%7Bdevice%7D%60%2C%20%7B%0A%20%20%20%20%20%20%20%20%20%20method%3A%20'POST'%2C%0A%20%20%20%20%20%20%20%20%20%20headers%3A%20%7B%20'Content-Type'%3A%20'application%2Fjson'%20%7D%2C%0A%20%20%20%20%20%20%20%20%20%20body%3A%20JSON.stringify(%7B%20state%3A%20args.STATE.toLowerCase()%20%7D)%2C%0A%20%20%20%20%20%20%20%20%20%20cache%3A%20'no-store'%0A%20%20%20%20%20%20%20%20%7D)%3B%0A%20%20%20%20%20%20%20%20this.deviceResponses%5Bdevice%5D%20%3D%20json%3B%0A%20%20%20%20%20%20%20%20this.deviceErrors%5Bdevice%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20this.deviceErrors%5Bdevice%5D%20%3D%20e.message%3B%0A%20%20%20%20%20%20%20%20this.deviceResponses%5Bdevice%5D%20%3D%20null%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getDeviceField(args)%20%7B%0A%20%20%20%20%20%20const%20response%20%3D%20this.deviceResponses%5Bargs.DEVICE%5D%3B%0A%20%20%20%20%20%20if%20(!response)%20return%20''%3B%0A%20%20%20%20%20%20const%20val%20%3D%20response%5Bargs.FIELD%5D%3B%0A%20%20%20%20%20%20return%20val%20%3F%3F%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getDeviceError(args)%20%7B%0A%20%20%20%20%20%20return%20this.deviceErrors%5Bargs.DEVICE%5D%20%7C%7C%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isDeviceOn(args)%20%7B%0A%20%20%20%20%20%20const%20device%20%3D%20args.DEVICE%3B%0A%20%20%20%20%20%20const%20response%20%3D%20this.deviceResponses%5Bdevice%5D%3B%0A%20%20%20%20%20%20const%20key%20%3D%20%60%24%7Bdevice%7D_on%60%3B%0A%0A%20%20%20%20%20%20%2F%2F%20Check%20control%20response%20first%2C%20fall%20back%20to%20sensor%20data%0A%20%20%20%20%20%20if%20(response%20%26%26%20key%20in%20response)%20return%20Boolean(response%5Bkey%5D)%3B%0A%20%20%20%20%20%20if%20(key%20in%20this.sensorData)%20return%20Boolean(this.sensorData%5Bkey%5D)%3B%0A%20%20%20%20%20%20return%20false%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20deviceAsJSON(args)%20%7B%0A%20%20%20%20%20%20const%20response%20%3D%20this.deviceResponses%5Bargs.DEVICE%5D%3B%0A%20%20%20%20%20%20return%20response%20%3F%20JSON.stringify(response)%20%3A%20'%7B%7D'%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20fetchSensor()%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20const%20json%20%3D%20await%20this._fetch(%60%24%7Bthis.baseURL%7D%2Fsensor%3F_%3D%24%7BDate.now()%7D%60%2C%20%7B%20cache%3A%20'no-store'%20%7D)%3B%0A%20%20%20%20%20%20%20%20this.sensorData%20%3D%20json%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20this.sensorData%20%3D%20%7B%20error%3A%20e.message%2C%20last_read_ok%3A%20false%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSensorField(args)%20%7B%0A%20%20%20%20%20%20const%20val%20%3D%20this.sensorData%5Bargs.FIELD%5D%3B%0A%20%20%20%20%20%20return%20val%20%3F%3F%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20getSensorError()%20%7B%0A%20%20%20%20%20%20return%20this.sensorData.error%20%7C%7C%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isSensorReadOK()%20%7B%0A%20%20%20%20%20%20return%20Boolean(this.sensorData.last_read_ok)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20hasAlert()%20%7B%0A%20%20%20%20%20%20return%20Boolean(this.sensorData.alert)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20sensorAsJSON()%20%7B%0A%20%20%20%20%20%20return%20JSON.stringify(this.sensorData)%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20async%20checkHealth()%20%7B%0A%20%20%20%20%20%20try%20%7B%0A%20%20%20%20%20%20%20%20this.healthData%20%3D%20await%20this._fetch(%60%24%7Bthis.baseURL%7D%2Fhealth%60%2C%20%7B%20cache%3A%20'no-store'%20%7D)%3B%0A%20%20%20%20%20%20%7D%20catch%20(e)%20%7B%0A%20%20%20%20%20%20%20%20this.healthData%20%3D%20%7B%20status%3A%20'error'%2C%20error%3A%20e.message%20%7D%3B%0A%20%20%20%20%20%20%7D%0A%20%20%20%20%7D%0A%0A%20%20%20%20getHealthStatus()%20%7B%0A%20%20%20%20%20%20return%20this.healthData.status%20%7C%7C%20''%3B%0A%20%20%20%20%7D%0A%0A%20%20%20%20isHealthy()%20%7B%0A%20%20%20%20%20%20return%20this.healthData.status%20%3D%3D%3D%20'ok'%3B%0A%20%20%20%20%7D%0A%20%20%7D%0A%0A%20%20Scratch.extensions.register(new%20HermieControl())%3B%0A%7D)(Scratch)%3B"},"meta":{"semver":"3.0.0","platform":{"name":"TurboWarp","url":"https://turbowarp.org/"}}}